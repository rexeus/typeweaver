/**
 * This file was automatically generated by typeweaver.
 * DO NOT EDIT. Instead, modify the source definition file and generate again.
 *
 * @generated by @rexeus/typeweaver
 */

import type { IHttpRequest, IHttpResponse } from "@rexeus/typeweaver-core";

/**
 * Context object passed through the middleware pipeline and to request handlers.
 *
 * The context carries the current request, response, and a state map
 * that middleware can use to pass data downstream to handlers.
 *
 * All data is in typeweaver's native `IHttpRequest`/`IHttpResponse` format â€”
 * no framework-specific types leak into middleware or handlers.
 *
 * @example
 * ```typescript
 * // In middleware: set state
 * app.use(async (ctx, next) => {
 *   ctx.state.set("userId", "user_123");
 *   await next();
 * });
 *
 * // In handler: read state
 * handleCreateTodo: async (request, ctx) => {
 *   const userId = ctx.state.get("userId") as string;
 *   // ...
 * };
 * ```
 */
export type ServerContext = {
  /** The incoming HTTP request in typeweaver format. */
  request: IHttpRequest;

  /** The outgoing HTTP response. Set by the handler or middleware. */
  response: IHttpResponse | undefined;

  /** Key-value store for sharing data between middleware and handlers. */
  state: Map<string, unknown>;
};
