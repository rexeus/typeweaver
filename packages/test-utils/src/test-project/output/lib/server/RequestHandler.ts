/**
 * This file was automatically generated by typeweaver.
 * DO NOT EDIT. Instead, modify the source definition file and generate again.
 *
 * @generated by @rexeus/typeweaver
 */

import type { IHttpRequest, IHttpResponse } from "@rexeus/typeweaver-core";
import type { ServerContext } from "./ServerContext";

/**
 * A type-safe request handler function.
 *
 * Receives an `IHttpRequest` (validated when `validateRequests` is enabled)
 * and the `ServerContext`, and returns a typed `IHttpResponse`. No framework-specific
 * types â€” everything is in typeweaver's native format.
 *
 * @template TRequest - The specific request type (e.g., `ICreateTodoRequest`)
 * @template TResponse - The specific response type (e.g., `CreateTodoResponse`)
 * @template TState - The state shape available in the server context
 *
 * @example
 * ```typescript
 * const handler: RequestHandler<ICreateTodoRequest, CreateTodoResponse> =
 *   async (request, ctx) => ({
 *     statusCode: 201,
 *     body: { id: "todo_1", title: request.body.title },
 *   });
 * ```
 */
export type RequestHandler<
  TRequest extends IHttpRequest = IHttpRequest,
  TResponse extends IHttpResponse = IHttpResponse,
  TState extends Record<string, unknown> = Record<string, unknown>,
> = (request: TRequest, ctx: ServerContext<TState>) => Promise<TResponse>;
