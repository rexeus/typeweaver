/* eslint-disable */
/**
 * This file was automatically generated by typeweaver.
 * DO NOT EDIT. Instead, modify the source definition file and generate again.
 *
 * @generated by @rexeus/typeweaver
 */

import {
  HttpMethod,
  TypeweaverRouter,
  type RequestHandler,
  type TypeweaverRouterOptions,
} from "../lib/server";

import type { IRegisterAccountRequest } from "./RegisterAccountRequest";
import { RegisterAccountRequestValidator } from "./RegisterAccountRequestValidator";
import type { RegisterAccountResponse } from "./RegisterAccountResponse";

export type AccountApiHandler<
  TState extends Record<string, unknown> = Record<string, unknown>,
> = {
  handleRegisterAccountRequest: RequestHandler<
    IRegisterAccountRequest,
    RegisterAccountResponse,
    TState
  >;
};

export class AccountRouter<
  TState extends Record<string, unknown> = Record<string, unknown>,
> extends TypeweaverRouter<AccountApiHandler<TState>> {
  public constructor(
    options: TypeweaverRouterOptions<AccountApiHandler<TState>>,
  ) {
    super(options);
    this.setupRoutes();
  }

  protected setupRoutes(): void {
    this.route(
      HttpMethod.POST,
      "/accounts",
      new RegisterAccountRequestValidator(),
      this.requestHandlers.handleRegisterAccountRequest.bind(
        this.requestHandlers,
      ),
    );
  }
}
